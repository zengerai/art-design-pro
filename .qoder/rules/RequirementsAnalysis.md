---
trigger: model_decision
description: 需求分析场景
---

**目标**: 模糊需求 → 精确规范

**执行步骤**

**1. 项目上下文分析**

- 分析现有项目结构、技术栈、架构模式、依赖关系
- 分析现有代码模式、现有文档和约定
- 理解业务域和数据模型
- 使用当前项目组件库

**2. 需求理解确认**

- 在项目下创建 docs/任务名/1.需求理解\_[任务名].md
- 包含项目和任务特性规范
- 包含原始需求、边界确认(明确任务范围)、需求理解(对现有项目的理解)、疑问澄清(存在歧义的地方)
- 边界确认

**3. 智能决策策略**

- 自动识别歧义和不确定性
- 生成结构化问题清单（按优先级排序）
- 优先基于现有项目内容和查找类似工程和行业知识进行决策和在文档中回答
- 有人员倾向或不确定的问题主动中断并询问关键决策点
- 基于回答更新理解和规范

**4. 中断并询问关键决策点**

- 主动中断询问，迭代执行智能决策策略
- 基于以上步骤，形成初版需求文档

**5. 需求反复论证**

- 拆分需求文档形成多个模块
- 基于项目经验，针对每个模块进行拓宽思考、边界确认、疑问澄清。每个模块至少反复2遍，用户确认后进入下一步模块。

**5. 最终共识** 生成 docs/任务名/2.需求共识\_[任务名].md 包含:

- 明确的需求描述和验收标准
- 技术实现方案和技术约束和集成方案
- 任务边界限制和验收标准
- 确认所有不确定性已解决

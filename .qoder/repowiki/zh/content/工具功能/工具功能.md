# 工具功能

<cite>
**本文档引用的文件**
- [art-global-search/index.vue](file://src/components/core/layouts/art-global-search/index.vue)
- [art-fast-enter/index.vue](file://src/components/core/layouts/art-fast-enter/index.vue)
- [art-settings-panel/index.vue](file://src/components/core/layouts/art-settings-panel/index.vue)
- [art-screen-lock/index.vue](file://src/components/core/layouts/art-screen-lock/index.vue)
- [useSettingsPanel.ts](file://src/components/core/layouts/art-settings-panel/composables/useSettingsPanel.ts)
- [useSettingsConfig.ts](file://src/components/core/layouts/art-settings-panel/composables/useSettingsConfig.ts)
- [setting.ts](file://src/config/setting.ts)
- [useFastEnter.ts](file://src/hooks/core/useFastEnter.ts)
</cite>

## 目录
1. [全局搜索](#全局搜索)
2. [快速入口](#快速入口)
3. [设置面板](#设置面板)
4. [屏幕锁定](#屏幕锁定)
5. [功能集成与扩展](#功能集成与扩展)

## 全局搜索

全局搜索功能提供了一种快速导航到系统内各个页面的便捷方式。用户可以通过快捷键快速打开搜索框，输入关键词即可搜索所有可见的菜单项。

该功能支持键盘导航，用户可以使用方向键在搜索结果中移动，按 Enter 键选择目标页面，或按 ESC 键关闭搜索框。搜索结果会实时显示匹配的菜单项，同时支持模糊匹配算法，能够根据用户输入的关键词匹配菜单标题。

当用户未输入搜索关键词时，搜索框会显示最近访问的历史记录，方便用户快速回到之前访问过的页面。每次成功导航后，系统会自动将访问的页面添加到历史记录中，并确保历史记录不超过最大长度限制。

**激活方式**：
- 快捷键：`Ctrl+K`（Windows/Linux）或 `Command+K`（Mac）

**用户交互模式**：
- 输入关键词进行实时搜索
- 使用方向键在结果间导航
- 按 Enter 键选择当前高亮项
- 按 ESC 键关闭搜索框

**个性化设置**：
- 搜索历史记录自动管理
- 支持国际化显示
- 响应式设计适配不同屏幕尺寸

**Section sources**
- [art-global-search/index.vue](file://src/components/core/layouts/art-global-search/index.vue#L1-L427)

## 快速入口

快速入口功能位于页面顶部，为用户提供了一组常用应用和快速链接的便捷访问方式。通过鼠标悬停即可展开包含应用列表和快速链接的下拉面板。

该功能从系统配置中读取应用和链接的配置信息，自动过滤出已启用的项目，并按照预设的排序权重进行排序展示。每个应用项包含图标、名称和描述信息，点击后可直接导航到对应页面或打开外部链接。

快速入口支持响应式设计，可以根据屏幕宽度动态调整显示策略。系统配置中可以设置最小显示宽度，确保在小屏幕设备上不会影响用户体验。

**配置方法**：
- 在系统配置文件中定义 `fastEnter` 配置对象
- 配置 `applications` 数组定义应用列表
- 配置 `quickLinks` 数组定义快速链接
- 每个配置项可设置 `enabled`、`order`、`name`、`icon` 等属性

**快捷键支持**：
- 无特定快捷键，通过鼠标悬停触发

**个性化设置**：
- 可自定义应用和链接的启用状态
- 支持自定义排序权重
- 可配置最小显示宽度
- 支持国际化显示

**Section sources**
- [art-fast-enter/index.vue](file://src/components/core/layouts/art-fast-enter/index.vue#L1-L114)
- [useFastEnter.ts](file://src/hooks/core/useFastEnter.ts#L1-L56)

## 设置面板

设置面板提供了系统外观和行为的全面配置选项，允许用户根据个人偏好定制界面样式和功能设置。

### 布局设置
- **菜单布局**：支持多种菜单布局模式，包括左侧菜单、混合菜单等
- **容器宽度**：可选择全宽布局或盒式布局
- **标签页样式**：提供默认、卡片式、谷歌风格等多种标签页样式

### 样式设置
- **主题风格**：支持明暗主题切换，可选择自动跟随系统主题
- **系统主题色**：提供多种预设主题颜色供选择
- **圆角大小**：可调整界面元素的圆角半径
- **盒子样式**：可选择边框模式或阴影模式

### 动画设置
- **页面切换动画**：支持淡入、从左滑入、从底滑入等多种过渡效果
- **进度条**：可开启或关闭页面加载进度条显示

### 功能设置
- **多标签页**：可开启或关闭工作台标签页功能
- **面包屑导航**：可控制是否显示当前位置导航
- **语言切换**：可开启或关闭语言切换按钮
- **水印**：可开启或关闭页面水印功能
- **色弱模式**：可开启色弱辅助模式

所有设置项都会持久化存储，确保用户下次访问时仍保持个性化配置。设置面板还提供了重置为默认设置的功能，方便用户恢复初始状态。

**Section sources**
- [art-settings-panel/index.vue](file://src/components/core/layouts/art-settings-panel/index.vue#L1-L73)
- [useSettingsPanel.ts](file://src/components/core/layouts/art-settings-panel/composables/useSettingsPanel.ts#L1-L193)
- [useSettingsConfig.ts](file://src/components/core/layouts/art-settings-panel/composables/useSettingsConfig.ts#L1-L249)
- [setting.ts](file://src/config/setting.ts#L1-L110)

## 屏幕锁定

屏幕锁定功能提供了额外的安全保护层，允许用户手动锁定当前会话，防止他人未经授权访问系统。

### 安全机制
- **密码加密**：用户设置的锁定密码使用 AES 算法加密存储
- **环境检测**：检测到开发者工具打开时会显示警告覆盖层
- **快捷键禁用**：锁定状态下禁用常见的浏览器快捷键（如 F12、Ctrl+Shift+I 等）
- **右键禁用**：禁用右键菜单防止查看源代码
- **文本选择禁用**：防止用户选择和复制页面内容

### 解锁流程
1. 用户通过快捷键 `Alt+¬` 或系统菜单触发锁定
2. 系统显示锁定界面，要求输入密码
3. 用户输入密码并提交验证
4. 验证成功后恢复会话，返回之前的工作界面
5. 验证失败时显示抖动动画提示，并清空输入框

### 安全特性
- **开发者工具防护**：检测到开发者工具打开时会显示警告，要求关闭后才能继续使用
- **多层防护**：结合密码验证和行为限制提供多重安全保障
- **移动设备适配**：自动检测移动设备环境，调整安全策略
- **会话保护**：锁定期间禁止大部分用户交互操作

**Section sources**
- [art-screen-lock/index.vue](file://src/components/core/layouts/art-screen-lock/index.vue#L1-L518)

## 功能集成与扩展

### 集成方式
各项工具功能通过组合式函数（Composables）和状态管理进行集成，确保功能的可复用性和可维护性。

- **全局搜索**：通过事件总线 `mittBus` 监听 `openSearchDialog` 事件来触发搜索框显示
- **快速入口**：使用 `useFastEnter` 组合式函数管理配置和状态
- **设置面板**：通过 `useSettingsPanel` 组合式函数协调多个子功能模块
- **屏幕锁定**：使用 Pinia Store 管理锁定状态和密码信息

### 扩展点
系统提供了多个扩展点，便于开发者自定义和扩展工具功能：

- **设置项扩展**：可通过修改 `basicSettingsConfig` 配置来添加新的设置选项
- **主题扩展**：支持添加新的主题颜色和样式变体
- **安全策略扩展**：可自定义锁定状态下的行为限制规则
- **搜索算法扩展**：可替换或增强现有的搜索匹配算法

### 协同工作模式
各项工具功能之间通过事件总线和状态管理进行协同工作：

- 设置面板的更改会实时反映到其他组件的显示效果上
- 屏幕锁定状态会影响其他工具功能的可用性
- 全局搜索的历史记录与用户导航行为保持同步
- 快速入口的显示状态受设置面板的配置控制

这种协同工作模式确保了系统整体的一致性和用户体验的连贯性。

**Section sources**
- [art-global-search/index.vue](file://src/components/core/layouts/art-global-search/index.vue#L1-L427)
- [art-fast-enter/index.vue](file://src/components/core/layouts/art-fast-enter/index.vue#L1-L114)
- [art-settings-panel/index.vue](file://src/components/core/layouts/art-settings-panel/index.vue#L1-L73)
- [art-screen-lock/index.vue](file://src/components/core/layouts/art-screen-lock/index.vue#L1-L518)
- [useSettingsPanel.ts](file://src/components/core/layouts/art-settings-panel/composables/useSettingsPanel.ts#L1-L193)
- [useFastEnter.ts](file://src/hooks/core/useFastEnter.ts#L1-L56)